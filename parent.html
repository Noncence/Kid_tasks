<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>–ü–∞–Ω–µ–ª—å —Ä–æ–¥–∏—Ç–µ–ª—è</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="parent-page">
        <header class="parent-header">
        <button class="btn-back" onclick="goHome()"><<</button>
        <div class="header-status">
            <div class="status-item">
                <span class="status-label">–ó–∞–¥–∞–Ω–∏—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ:</span>
                <span class="status-value" id="reviewCount">0</span>
            </div>
            <div class="status-item">
                <span class="status-label">–†–µ–±–µ–Ω–æ–∫:</span>
                <span class="status-value online" id="childStatus">–û–Ω–ª–∞–π–Ω</span>
            </div>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-settings" onclick="openParentSettings()">‚öôÔ∏è</button>
        </div>
        </header>

        <main class="parent-main">
            <section class="tasks-section">
                <h2 class="section-title">–ó–∞–¥–∞–Ω–∏—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</h2>
                <div class="tasks-list" id="parentReviewTasks"></div>
            </section>

            <section class="tasks-section">
                <h2 class="section-title">–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                <div class="tasks-list" id="parentCurrentTasks"></div>
            </section>

            <section class="tasks-section">
            <h2 class="section-title">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</h2>
            <div class="tasks-list" id="parentCompletedTasks"></div>
            <button id="parentLoadMoreBtn" onclick="showMoreParentTasks()" class="load-more-btn" style="display: none;">
              üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ –∑–∞–¥–∞–Ω–∏—è
            </button>
            </section>

            <section class="stats-section">
                <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–±–µ–Ω–∫–∞</h2>
                <div class="cookie-jar-container">
                    <div class="cookie-jar">
                        <div class="cookie-jar-fill" id="parentCookieJarFill" style="height: 0%;"></div>
                    </div>
                    <div class="cookie-jar-label">–ë–∞–Ω–∫–∞ —Å –ø–µ—á–µ–Ω—å–µ–º üç™</div>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="parentTotalCompleted">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="parentTotalPoints">0</div>
                        <div class="stat-label">–ë–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="parentCurrentLevel">1</div>
                        <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                </div>
            </section>
        </main>

        <button class="floating-btn" onclick="openAddTaskModal()">+</button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddTaskModal()">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</h2>
            <div class="task-form">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è:</label>
                <input type="text" id="newTaskTitle" class="input-field" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–∞—Å—Å–∫–∞–∑">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="newTaskDescription" class="input-field" rows="4" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è..."></textarea>
                <label>–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                <input type="date" id="newTaskDate" class="input-field">
                <label>–ë–∞–ª–ª—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:</label>
                <input type="number" id="newTaskPoints" class="input-field" value="10" min="1">
                <button onclick="addTask()" class="btn-primary">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–¥–∞–Ω–∏—è -->
    <div id="reviewTaskModal" class="modal">
        <div class="modal-content task-modal-content">
            <span class="close" onclick="closeReviewModal()">&times;</span>
            <h2 id="reviewTaskTitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞–Ω–∏—è</h2>
            <div class="task-description" id="reviewTaskDescription"></div>
            <div class="task-answer-review">
                <h3>–û—Ç–≤–µ—Ç —Ä–µ–±–µ–Ω–∫–∞:</h3>
                <div class="answer-text" id="reviewAnswerText"></div>
                <div id="reviewAttachment" class="review-attachment"></div>
            </div>
            <div class="review-comment-section" id="reviewCommentSection" style="display: none;">
                <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Ä–µ–±–µ–Ω–∫–∞ (—á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å):</label>
                <textarea id="reviewComment" class="input-field" rows="3" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å..."></textarea>
            </div>
            <div class="review-actions">
                <button class="btn-reject" onclick="showRejectComment()">–í–µ—Ä–Ω—É—Ç—å –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É</button>
                <button class="btn-approve" onclick="approveTask()">–ü—Ä–∏–Ω—è—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è -->
    <div id="editTaskModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditTaskModal()">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</h2>
            <div class="task-form">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è:</label>
                <input type="text" id="editTaskTitle" class="input-field" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–∞—Å—Å–∫–∞–∑">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="editTaskDescription" class="input-field" rows="4" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è..."></textarea>
                <label>–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                <input type="date" id="editTaskDate" class="input-field">
                <label>–ë–∞–ª–ª—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:</label>
                <input type="number" id="editTaskPoints" class="input-field" value="10" min="1">
                <div style="display: flex; gap: 10px;">
                    <button onclick="saveEditedTask()" class="btn-primary" style="flex: 1;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button onclick="deleteTask()" class="btn-reject" style="flex: 1;">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="parentSettingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeParentSettingsModal()">&times;</span>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <div class="settings-form">
                <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                <input type="password" id="newPassword" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
                <button onclick="saveParentSettings()" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                <div class="reset-section" style="margin: 20px 0; padding: 15px; background: var(--sticky-pink); border-radius: 10px; border: 2px solid var(--wood-border);">
                    <h3 style="margin-bottom: 15px; color: var(--text-dark);">–°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ–±–µ–Ω–∫–∞</h3>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <button onclick="resetChildPoints()" class="btn-reject" style="flex: 1;">
                            üéØ –°–±—Ä–æ—Å–∏—Ç—å –æ—á–∫–∏
                        </button>
                        <button onclick="resetChildLevel()" class="btn-reject" style="flex: 1;">
                            üìä –°–±—Ä–æ—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
                        </button>
                    </div>
                    
                    <button onclick="resetChildStats()" class="btn-reject" style="width: 100%; margin-top: 10px;">
                        üóëÔ∏è –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                    </button>
                    
                    <div style="font-size: 12px; color: var(--text-light); margin-top: 10px;">
                        –¢–µ–∫—É—â–∏–µ: –£—Ä–æ–≤–µ–Ω—å ${appData.child.level}, ${appData.child.points} –æ—á–∫–æ–≤
                    </div>
                </div>
                <button type="button" onclick="cleanupStorage()" class="btn-reject" style="margin-top: 10px;">
                    üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è
                </button>
                <button class="btn-logout" onclick="logout()" title="–í—ã–π—Ç–∏">üö™–í—ã—Ö–æ–¥</button>
            </div>
        </div>
    </div>
  
 <script>
    // –ó–∞—â–∏—Ç–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã - —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å
    document.addEventListener('DOMContentLoaded', function() {
        protectPage('parent');
    });
</script>
  
   <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <!-- –¢–≤–æ–∏ —Ñ–∞–π–ª—ã Firebase -->
    <script src="firebase-config.js"></script>
    <script src="firebase-app.js"></script>
    <script src="script.js"></script>
    
</body>

</html>

